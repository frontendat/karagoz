# Process Tabs

The `processTabs` property of the sandbox is responsible for managing processes and terminals.

## Automatic Bootstrapping 

For simple use cases, directly managing processes won't be necessary. 
Karag√∂z Sandbox offers the `bootstrap` function which does the following:
1. Kills the dependency installation process and the dev server if either of them is running.
2. **On first run:** listen to URL change events in the preview iframe to emit the latest URL to the parent window.
   This is needed to show the current URL in address bar of the preview.
3. Open a terminal window if allowed by the sandbox options.
4. Install dependencies (using the package manager configured in the options).
5. Start the dev server (also using the package manager configured in the options).
6. **On first run:** watch the current working directory to re-bootstrap when a file changes that should trigger
   re-install (e.g. `package.json`).

## Manual Process Management

You can opt out of automatic bootstrapping simply by not calling `sandbox.bootstrap()`, then you will have full 
control over which processes to run and in what order.

## Spawning a Process

Whether you opt in or out of automatic bootstrapping, you can manually spawn processes by calling `editorTabs.open()`.

```ts
sandbox.processTabsopen(
  // Unique id. As a convention, you can use the string presentation of the command to run.
  'npm install',
  
  // Optional label to show for the process tab. 
  // If not provided, the process tab ID is shown instead.
  'Install', 
     
  // Optional context.
  {
     // The only mandatory property. The command to spawn the process with.
     command: 'npm',
     // Additional arguemtns.
     arguments: ['install', '--frozen-lockfile'],
     
     // Flags to enable/disable certain UI features (all false by default).
     canRestart: false,
     canStop: false,
     isHidden: false,
     suppressClose: false,
     suppressInput: false,
     
     // When true, the process is treated as a terminal: 
     // some flags are ignored and the tab will be shown in the
     // terminals panel and not in the processes panel.
     isTerminal: false,
  },
)
```

The context object has some additional properties that are used internally. 
You can learn more about it in the [API Reference](/sandbox/api-reference/type-aliases/processtabcontext).

If you provide an ID that already exists, then the respective process tab will be focused without spawning a new 
process.

## Stopping a Process

You can stop a process either
* by calling `sandbox.processTabs.close(id)` which kills the process and closes its respective tab,
* or by calling `sandbox.processTabs.kill(id)` which kills the process, but keeps its respective tab visible so the 
  user still has access to its output.

## Restarting a Process

A process can be restarted by calling `sandbox.processTabs.restart(id)`.

Also, processes that have `canRestart: true` in their context show a restart button to respawn the process through 
the UI.

## Manual Bootstrapping Example

Let's bring everything together and manually start processes.

[Full example code](https://github.com/frontendat/karagoz/blob/main/apps/docs/components/content/sandbox/demo/SandboxDemoManualBootstrapping.vue)

::demo-runner
:sandbox-demo-manual-bootstrapping
::
